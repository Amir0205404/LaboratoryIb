# LaboratoryIb
<div align="center">
    <h1>Динамическое сегментирование пользователей</h1>
</div>
https://github.com/breeeaaad/dynamic-segmentation.git
---

## Используемые библиотеки и фреймворки:
- `gin`
- `pgx`
- `godotenv`

---

## Схема БД
![Схема БД](./docs/schema.png)

---

## Запуск
Перед запуском можно прописать переменные окружения в Makefile(по-умолчанию они там есть).
Чтобы запустить приложение, необходимо выполнить следующую команду в корне репозитория:

```
make run
```

Остановить можно командой:

```
make stop
```

---

## Запросы:
Все полные примеры запросов будут представлены в postman
## Создание пользователя
![Создание пользователя](./docs/newuser.png)
## Создание сегмента
![Создание сегмента](./docs/create.png)
## Удаление сегмента
![Удаление сегмента](./docs/delete.png)
## Добавление или удаление пользователя из сегмента
![Добавление или удаление пользователя из сегмента](./docs/editing.png)
## Получение информации о пользователе
![Получение информации о пользователе](./docs/info.png)
## Скачивание отчета
![Скачивание отчета](./docs/download.png)

---
<div align="center">
    <h1>backend-service java</h1>
</div>
https://github.com/Muharsul05/backend-service

## Дополнительно:

## Указание процентов 
Можно указать процент автоматического попадания пользователей в сегмент при его создании.

## Автоматическое удаление при истечении TTL
Можно указать время в днях, когда сегмент у пользователя автоматически удалиться из таблицы бд. Для ее реализации запускается фоновая функция, которая удаляет при запуске и каждые 24 часа все строки с истекшим TTL. 

# Что необходимо для запуска проекта на хосте:

* JDK 21, если нет то надо скачать и установить: [JDK 21](https://download.oracle.com/java/21/latest/jdk-21_windows-x64_bin.exe).
* PostgreSQL любая версия: [PostgreSQL](https://sbp.enterprisedb.com/getfile.jsp?fileid=1258792).

# Проверка установки:
    Для проверки что JDK установлена: java --version
    Для проверки что установлен PostgreSQL: В пуске должна быть программа PgAdmin

## Запуск проекта:
    git clone https://github.com/Muharsul05/backend-service
    cd backend-service
    ./mwnv spring-boot:run 

# Для запуска проекта в контейнере:
    Требуется Docker и терпение пока развернётся проект.
    Комманды для развёртки проекта:
    cd docker
    docker compose up -d

### На проекте есть документация доступная по url: [Документация](http://localhost:8080/microservice/api/docs-ui.html)
